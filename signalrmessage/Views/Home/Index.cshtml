@{
	Layout = null;
}

<!--Script references. -->
<!--Reference the jQuery library. -->
<script src="../Scripts/jquery-1.10.2.min.js"></script>

<!--Reference the SignalR library. -->

<script src="../Scripts/jquery.signalR-2.2.3.min.js"></script>

<!--Reference the autogenerated SignalR hub script. -->
<script src="~/signalr/hubs"></script>
<!--Add script to update the page and send messages.-->

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>

<div class="container" ng-controller="myCtrl">
	<div class="row">
		<div class="col-md-6 text-center">
			<div class="row" style="margin-bottom:20px;">
				<div class="col-md-12">
					<h2>Your Message</h2>
				</div>
			</div>
			<div class="row">
				<div class="col-md-12">
					<input class="btn" type="text" style="background-color: #eee; border-radius:0px; text-align:left;" id="username" placeholder="Name" />
					<input class="btn" type="text" style="background-color: #eee; border-radius:0px; text-align:left;" id="message" placeholder="Enter your message..." />
					<input type="button" style="border-radius:0px;" class="btn btn-primary" value="Send"  id="sendmessage"/>
				</div>
			</div>
		</div>
		<div class="col-md-6">
			<div class="row text-center" style="margin-bottom:20px;">
				<div class="col-md-12">
					<h2>Conversation</h2>
				</div>
			</div>
			<div class="row">
				<ul style="list-style:none;" id="discussion"></ul>
			</div>
		</div>
	</div>
</div>

<script>
	$(function () {
		// Declare a proxy to reference the hub.
		var chat = $.connection.messageHub;
		// Create a function that the hub can call to broadcast messages.
		chat.client.broadcastMessage = function (name, message) {
			// Html encode display name and message.
			var encodedName = $('<div />').text(name).html();
			var encodedMsg = $('<div />').text(message).html();
			// Add the message to the page.
			$('#discussion').append('<li><strong>' + encodedName
				+ '</strong>:&nbsp;&nbsp;' + encodedMsg + '</li>');
		};
		// Get the user name and store it to prepend to messages.
		//$('#displayname').val(prompt('Enter your name:', ''));
		// Set initial focus to message input box.
		$('#message').focus();
		// Start the connection.
		$.connection.hub.start().done(function () {
			$('#sendmessage').click(function () {
				// Call the Send method on the hub.
				chat.server.sendMessage($('#username').val(), $('#message').val());
				// Clear text box and reset focus for next comment.
				$('#message').val('').focus();
			});
		});
	});
</script>